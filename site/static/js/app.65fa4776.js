(function(t){function e(e){for(var a,o,s=e[0],u=e[1],l=e[2],p=0,m=[];p<s.length;p++)o=s[p],r[o]&&m.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);c&&c(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("c21b"),r=n.n(a);r.a},"0a51":function(t,e,n){},1:function(t,e){},2687:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Leaflet"),n("Summary"),n("h2",[t._v("All Rides")]),n("Vuetable")],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"leaflet-comp"}},[n("l-map",{attrs:{bounds:t.bounds,zoom:t.zoom,center:t.center,maxBounds:t.maxBounds,inertia:!1},on:{"update:zoom":t.zoomUpdated}},[n("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._l(t.popups,function(e,a){return n("l-marker",{key:"marker"+a,attrs:{"lat-lng":e[0]}},[n("l-popup",{key:"pop"+a,attrs:{"lat-lng":t.popups[a][0],content:t.popups[a][1]}})],1)}),t._l(t.polylines,function(t,e){return n("l-polyline",{key:"line"+e,attrs:{"lat-lngs":t,fill:!1}})})],2)],1)},s=[],u=(n("96cf"),n("3040")),l=(n("7f7f"),n("458e")),c=(n("6cc5"),n("e11e")),p=n.n(c),m=n("bf2a"),d=n.n(m);delete p.a.Icon.Default.prototype._getIconUrl,p.a.Icon.Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var f={components:{LMap:l["LMap"],LTileLayer:l["LTileLayer"],LMarker:l["LMarker"],LPolyline:l["LPolyline"],LPopup:l["LPopup"]},data:function(){return{zoom:2,center:[0,0],bounds:null,maxBounds:null,url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},computed:{rides:function(){return this.$store.state.activities.map(function(t){return t.start_latlng})},polylines:function(){return this.$store.state.activities.map(function(t){var e=d.a.polyline.parse(t.map.summary_polyline),n=e._layers[e._leaflet_id-1].feature.geometry.coordinates;if(n)return n=n.map(function(t){return t.reverse()}),n})},popups:function(){return this.$store.state.activities.map(function(t){return[t.start_latlng,"<p>"+t.name+"<br>"+(t.distance/1e3).toFixed(2)+" km "+t.type+"<br>"+(t.moving_time/3600).toFixed(2)+" hrs Moving   "+(t.elapsed_time/3600).toFixed(2)+' hrs Total</p><br><a href="https://www.strava.com/activities/'+t.id+'" target="_blank">View on Strava</a>']})}},watch:{rides:function(t){var e=this,n=t.reduce(function(t,e){if("[]"==JSON.stringify(t))return t=[e,e],t;var n=t[0][0],a=t[1][0],r=t[0][1],i=t[1][1];return isNaN(e[0])||isNaN(e[1])?t:(e[0]<t[0][0]&&(n=e[0]),e[0]>t[1][0]&&(a=e[0]),e[1]<t[0][1]&&(r=e[1]),e[1]>t[1][1]&&(i=e[1]),t=[[n,r],[a,i]],t)},[]),a=[[n[0][0]-1,n[0][1]-1],[n[1][0]+1,n[1][1]+1]];setTimeout(function(){e.bounds=a},500)}},methods:{getAllActivities:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,n,a,r,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=new Date(this.$store.state.start),n=1,a=[],r="";case 4:return t.next=6,fetch("https://www.strava.com/api/v3/athletes/7594/activities?access_token=641c02aede2bd589ccf83096c9ea706c2fd3a1ec&per_page=50&page="+n);case 6:return i=t.sent,t.next=9,i.json();case 9:if(r=t.sent,o=r.reduce(function(t,n){var a=new Date(n.start_date);return e>a||t},!1),r=r.filter(function(t){var n=new Date(t.start_date);return n>=e}),a=a.concat(r),!o){t.next=16;break}return this.$store.commit("setActivities",a),t.abrupt("return");case 16:n++;case 17:if(""!=r){t.next=4;break}case 18:return this.$store.commit("setActivities",a),t.abrupt("return");case 20:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),zoomUpdated:function(t){this.zoom=t}},mounted:function(){this.getAllActivities()}},v=f,_=(n("df6a"),n("2877")),h=Object(_["a"])(v,o,s,!1,null,null,null);h.options.__file="Leaflet.vue";var b=h.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vue-virtual-table",{attrs:{config:t.tableConfig,data:t.tableData2,height:500,minWidth:800,itemHeight:80,enableExport:!0,language:"en"}})},y=[],S=n("b360"),x={components:{VueVirtualTable:S["a"]},data:function(){return{tableConfig:[{prop:"date",name:"Date",sortable:!0,summary:"COUNT"},{prop:"time",name:"Start Time",sortable:!0},{prop:"name",name:"Name",searchable:!0},{prop:"distance",name:"Distance (km)",summary:"SUM",sortable:!0},{prop:"moving_time",name:"Moving Time (hrs)",summary:"SUM",sortable:!0},{prop:"elapsed_time",name:"Elapsed Time (hrs)",summary:"SUM",sortable:!0},{prop:"total_elevation_gain",name:"Climbed (m)",summary:"SUM",sortable:!0}]}},computed:{tableData2:function(){return this.$store.state.activities.map(function(t){return{date:t.start_date_local.slice(0,10),time:t.start_date_local.slice(11,16),name:t.name,distance:(t.distance/1e3).toFixed(2),moving_time:(t.moving_time/3600).toFixed(2),elapsed_time:(t.elapsed_time/3600).toFixed(2),total_elevation_gain:t.total_elevation_gain}})}}},w=x,k=(n("8383"),Object(_["a"])(w,g,y,!1,null,null,null));k.options.__file="Vuetable.vue";var T=k.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"center"}},[n("h2",[t._v("Summary Stats")]),n("div",{staticClass:"container"},[n("div",[n("strong",[t._v("Average Riding Speed: ")]),n("br"),n("h3",[t._v(t._s((t.summaryStats.distance/1e3/t.summaryStats.moving_time*3600).toFixed(2))+" kph")])]),n("div",[n("strong",[t._v("Average Speed w/ Stops: ")]),n("br"),n("h3",[t._v(t._s((t.summaryStats.distance/1e3/t.summaryStats.elapsed_time*3600).toFixed(2))+" kph")])]),n("div",[n("strong",[t._v("Days Riding")]),n("br"),n("h3",[t._v(t._s(t.summaryStats.day.length-1))])]),n("div",[n("strong",[t._v("Total Days")]),n("br"),n("h3",[t._v(t._s(t.days))])]),n("div",[n("strong",[t._v("Total Riding Time")]),n("br"),n("h3",[t._v(t._s((t.summaryStats.moving_time/3600).toFixed(2))+" hrs")])]),n("div",[n("strong",[t._v("Total Elapsed Time on Bike")]),n("br"),n("h3",[t._v(t._s((t.summaryStats.elapsed_time/3600).toFixed(2))+" hrs")])]),n("div",[n("strong",[t._v("Total Distance")]),n("br"),n("h3",[t._v(t._s((t.summaryStats.distance/1e3).toFixed(0))+" kms")])])])])},M=[],L=(n("6762"),n("2fdb"),{computed:{summaryStats:function(){var t={elapsed_time:0,moving_time:0,distance:0,total_elevation_gain:0,day:["2019-03-15","2019-03-16"]},e=this.$store.state.activities.reduce(function(t,e){return t.elapsed_time+=e.elapsed_time,t.moving_time+=e.moving_time,t.distance+=e.distance,t.total_elevation_gain+=e.total_elevation_gain,t.day.includes(e.start_date_local.slice(0,10))||t.day.push(e.start_date_local.slice(0,10)),t},t);return e},days:function(){var t=new Date(2019,2,15),e=new Date;return Math.round(Math.abs((e.getTime()-t.getTime())/864e5))}}}),j=L,D=(n("c970"),Object(_["a"])(j,O,M,!1,null,null,null));D.options.__file="Summary.vue";var A=D.exports,$=n("2f62");a["a"].use($["a"]);var F=new $["a"].Store({state:{start:"3/12/2019",end:"11/21/2019",athlete:"",activities:[]},mutations:{setStart:function(t,e){t.start=e},setEnd:function(t,e){t.end=e},setAthlete:function(t,e){t.athlete=e},setActivities:function(t,e){t.activities=e},addActivities:function(t,e){t.activities=t.activities.append(e)}}}),U={name:"app",store:F,components:{Leaflet:b,Vuetable:T,Summary:A}},P=U,z=(n("034f"),Object(_["a"])(P,r,i,!1,null,null,null));z.options.__file="App.vue";var E=z.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(E)}}).$mount("#app")},8383:function(t,e,n){"use strict";var a=n("0a51"),r=n.n(a);r.a},c21b:function(t,e,n){},c970:function(t,e,n){"use strict";var a=n("d911"),r=n.n(a);r.a},d911:function(t,e,n){},df6a:function(t,e,n){"use strict";var a=n("2687"),r=n.n(a);r.a}});
//# sourceMappingURL=app.65fa4776.js.map